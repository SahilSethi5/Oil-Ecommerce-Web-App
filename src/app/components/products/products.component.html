<div class="container mt-4">
  <h1 class="mb-4">Our Products</h1>
  
  <!-- Loading state -->
  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2">Loading products...</p>
  </div>
  
  <!-- Error state -->
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>
  
  <!-- Content when products loaded -->
  <ng-container *ngIf="!loading && !error">
    <!-- Filters -->
    <div class="row mb-4">
      <div class="col-md-6 mb-3">
        <label for="category" class="form-label">Filter by Category:</label>
        <select id="category" class="form-select" [(ngModel)]="selectedCategory" (change)="filterProducts()">
          <option value="all">All Categories</option>
          <option *ngFor="let category of getCategories()" [value]="category">
            {{ category | titlecase }}
          </option>
        </select>
      </div>
      
      <div class="col-md-6 mb-3">
        <label for="sortBy" class="form-label">Sort by:</label>
        <select id="sortBy" class="form-select" [(ngModel)]="sortBy" (change)="sortProducts()">
          <option value="name">Name (A-Z)</option>
          <option value="price-low">Price (Low to High)</option>
          <option value="price-high">Price (High to Low)</option>
        </select>
      </div>
    </div>
    
    <!-- Product grid -->
    <div class="row">
      <div class="col-md-4 mb-4" *ngFor="let product of filteredProducts">
        <app-product-card 
          [product]="product"
          (addToCart)="onAddToCart($event)">
        </app-product-card>
      </div>
    </div>
    
    <!-- No products found -->
    <div *ngIf="filteredProducts.length === 0" class="text-center py-5">
      <div class="alert alert-info">
        No products found matching your criteria.
      </div>
    </div>
  </ng-container>
</div>